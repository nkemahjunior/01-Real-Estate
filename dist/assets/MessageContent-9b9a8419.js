import{j as e,k as l,b as g,d as x,_ as u,e as p,S as c,i as m}from"./index-c523e353.js";import{r as y,d as f,b as j}from"./apiMessages-2e40fe14.js";import{c as h}from"./createSvgIcon-b5b4d4b3.js";const v=h(e.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");function b(){const{senderID:s}=l(),r=g(),{mutate:n,isLoading:a}=x({mutationFn:t=>{y(s,t)},onSuccess:t=>{r.invalidateQueries({queryKey:["reply"]}),u.success("message sent.")},onError:t=>{u.error("could not send message,try again")}});return{messageReply:n,isLoading:a}}function M(){const{register:s,handleSubmit:r,reset:n}=p(),{messageReply:a,isLoading:t}=b();if(t)return e.jsx(c,{});function o(i){a(i,{onSuccess:d=>n()})}return e.jsx("div",{className:"mt-4",children:e.jsx("form",{onSubmit:r(o),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{children:e.jsx("input",{type:"text",id:"message",className:"w-[40dvh] rounded-md",...s("message",{required:!0})})}),e.jsx("button",{children:e.jsx(v,{style:{color:"#6366f1"}})})]})})})}function N({message:s}){return e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"border-solid border-2 rounded-md bg-stone-50 text-left  w-fit p-2 font-Inter ",children:s})})}function S({message:s}){return e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"border-solid border-2 rounded-md bg-stone-200  text-end  p-2 font-Inter ",children:s})})}function R(){const{senderID:s}=l(),{isLoading:r,data:n,error:a}=m({queryKey:["reply",s],queryFn:()=>f(s)});return{isLoading:r,data:n}}function q(){const{senderID:s}=l(),{isLoading:r,data:n,error:a}=m({queryKey:["Allmessages",s],queryFn:()=>j(s)});return{isLoading:r,data:n}}function D(){const{isLoading:s,error:r,data:n}=q(),{isLoading:a,data:t}=R();if(s)return e.jsx(c,{});if(a)return e.jsx(c,{});console.log(n),console.log(t);const{data:o}=n,{data:i}=t;return e.jsx("div",{className:"flex justify-center items-center md:mt-6 px-2 bg-indigo-50 md:bg-white",children:e.jsx("div",{className:"md:border-2 md:border-solid h-[98dvh] w-[100dvh] md:h-[70dvh] md:w-[100dvh] overflow-y-scroll bg-indigo-50 md:px-4",children:e.jsxs("div",{className:"pt-4",children:[o.map(d=>e.jsx(N,{message:d.message},d.id)),i.map(d=>e.jsx(S,{message:d.message},d.id)),e.jsx(M,{})]})})})}export{D as default};
