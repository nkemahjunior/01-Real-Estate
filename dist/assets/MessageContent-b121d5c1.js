import{j as e,k as l,b as g,d as x,_ as u,e as p,S as c,i as m}from"./index-b1fe0302.js";import{r as y,d as f,b as j}from"./apiMessages-3e1f7d0e.js";import{c as h}from"./createSvgIcon-26721ea7.js";const v=h(e.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");function b(){const{senderID:s}=l(),n=g(),{mutate:r,isLoading:t}=x({mutationFn:a=>{y(s,a)},onSuccess:a=>{n.invalidateQueries({queryKey:["reply"]}),u.success("message sent.")},onError:a=>{u.error("could not send message,try again")}});return{messageReply:r,isLoading:t}}function M(){const{register:s,handleSubmit:n,reset:r}=p(),{messageReply:t,isLoading:a}=b();if(a)return e.jsx(c,{});function i(o){t(o,{onSuccess:d=>r()})}return e.jsx("div",{className:"mt-4",children:e.jsx("form",{onSubmit:n(i),children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{children:e.jsx("input",{type:"text",id:"message",className:"w-[40dvh] rounded-md",...s("message",{required:!0})})}),e.jsx("button",{children:e.jsx(v,{style:{color:"#6366f1"}})})]})})})}function N({message:s}){return e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"border-solid border-2 rounded-md bg-stone-50 text-left  w-fit p-2 font-Inter ",children:s})})}function S({message:s}){return e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"border-solid border-2 rounded-md bg-stone-200  text-end  p-2 font-Inter ",children:s})})}function R(){const{senderID:s}=l(),{isLoading:n,data:r,error:t}=m({queryKey:["reply",s],queryFn:()=>f(s)});return{isLoading:n,data:r}}function q(){const{senderID:s}=l(),{isLoading:n,data:r,error:t}=m({queryKey:["Allmessages",s],queryFn:()=>j(s)});return{isLoading:n,data:r}}function D(){const{isLoading:s,error:n,data:r}=q(),{isLoading:t,data:a}=R();if(s)return e.jsx(c,{});if(t)return e.jsx(c,{});const{data:i}=r,{data:o}=a;return e.jsx("div",{className:"flex justify-center items-center md:mt-6 px-2 bg-indigo-50 md:bg-white",children:e.jsx("div",{className:"md:border-2 md:border-solid h-[98dvh] w-[100dvh] md:h-[70dvh] md:w-[100dvh] overflow-y-scroll bg-indigo-50 md:px-4",children:e.jsxs("div",{className:"pt-4",children:[i.map(d=>e.jsx(N,{message:d.message},d.id)),o.map(d=>e.jsx(S,{message:d.message},d.id)),e.jsx(M,{})]})})})}export{D as default};
