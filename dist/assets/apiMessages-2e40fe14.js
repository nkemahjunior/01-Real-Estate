import{s as a}from"./index-c523e353.js";async function g(t){var n;const{data:o,error:e}=await a.from("PropertiesForRent").select("id , ownerID").eq("id",t),r=(n=o[0])==null?void 0:n.ownerID,{data:s,error:d}=await a.from("owner").select("ownerID, ownerName").eq("ownerID",r);if(e)throw new Error("could not read property id ");if(d)throw new Error("could not read owner name  ");return s}async function l(t,o){var c;const{data:{user:e}}=await a.auth.getUser();let r=e.user_metadata,s=e.id;const{data:d,error:n}=await a.from("PropertiesForRent").select("id , ownerID").eq("id",t),w=(c=d[0])==null?void 0:c.ownerID,{data:m,error:i}=await a.from("messages").insert([{senderID:s,message:o.message,receiverID:w,senderName:r.fullName}]).select();if(i)throw new Error("could not send message "+i.message);if(n)throw new Error("could not find the receiver "+i.message)}async function f(){const{data:{user:t}}=await a.auth.getUser();t.user_metadata;let o=t.id;const{data:e,error:r}=await a.from("messages").select("*").eq("receiverID",o);if(r)throw new Error("could not get messages "+r.message);return{data:e,error:r}}async function D(t){const{data:{user:o}}=await a.auth.getUser();let e=o.id;const{data:r,error:s}=await a.from("messages").select("*").eq("receiverID",e).eq("senderID",t);if(s)throw new Error("could not get  all messages "+s.message);return{data:r,error:s}}async function I(t,o){const{data:{user:e}}=await a.auth.getUser();let r=e.user_metadata,s=e.id;const{data:d,error:n}=await a.from("messages").insert([{senderID:s,message:o.message,receiverID:t,senderName:r.fullName}]).select();if(n)throw new Error("could not send  your message "+n.message);return{data:d,error:n}}async function h(t){const{data:{user:o}}=await a.auth.getUser();let e=o.id,{data:r,error:s}=await a.from("messages").select("*").eq("senderID",e).eq("receiverID",t);if(s)throw new Error("could not get  your reply "+s.message);return{data:r,error:s}}export{f as a,D as b,h as d,g,I as r,l as s};
